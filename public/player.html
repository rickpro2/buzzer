<!DOCTYPE html>
<html>
<head>
  <title>Join Game</title>
  <link rel="stylesheet" href="style.css" />
  <script src="/socket.io/socket.io.js"></script>
</head>
<body>

  <div id="joinScreen">
    <h2>Enter your name</h2>
    <input id="nameInput" />
    <button id="joinBtn">Join</button>
    <h2>Select your team</h2>
<select id="teamSelect" style="font-size:20px;padding:10px;width:80%"></select>

  </div>

  <div id="buzzScreen" style="display:none;">
    <h2 id="status">Waiting for host...</h2>
    <button id="buzzBtn" class="buzz-button">BUZZ</button>
  </div>

<script>
const socket = io();

const joinScreen = document.getElementById("joinScreen");
const buzzScreen = document.getElementById("buzzScreen");
const statusText = document.getElementById("status");
const buzzBtn = document.getElementById("buzzBtn");
const teamSelect = document.getElementById("teamSelect");

// Receive team list updates from server
socket.on("teamList", (teams) => {
  teamSelect.innerHTML = teams.map(t => `<option value="${t}">${t}</option>`).join("");
});

document.getElementById("joinBtn").onclick = () => {
  const name = document.getElementById("nameInput").value.trim();
  const team = teamSelect.value;
  if (!name) return;

  socket.emit("join", { name, team });

  joinScreen.style.display = "none";
  buzzScreen.style.display = "block";
};

buzzBtn.onclick = () => socket.emit("buzz");

socket.on("armed", () => {
  statusText.textContent = "BUZZ NOW!";
  buzzBtn.disabled = false;
});

socket.on("winner", (player) => {
  statusText.textContent = `${player.team} - ${player.name} buzzed first!`;
  buzzBtn.disabled = true;
});

socket.on("reset", () => {
  statusText.textContent = "Waiting for host...";
  buzzBtn.disabled = true;
});
</script>

</body>
</html>
